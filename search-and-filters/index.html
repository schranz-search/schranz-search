<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Cookbooks" href="../cookbooks/index.html" /><link rel="prev" title="Index Operations" href="../indexing/index.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 6.2.1 and Furo 2023.03.27 -->
        <title>Search &amp; Filter Conditions - SEAL Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SEAL Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-brand" href="../index.html">
        <a href="../index.html" class="sidebar-logo-container">
            <img class="sidebar-logo" src="../_static/logo.svg" alt="Logo"/>
        </a>

        
        <span class="sidebar-logo-creator centered">
            <span>Logo created by</span> <a target="_blank" href="https://cargocollective.com/meinewilma">Meine Wilma</a>
        </span>

        
            <span class="sidebar-brand-text">
                <span class="sidebar-brand-text-before">SEAL</span>
                <span class="sidebar-brand-text-after">Search Engine Abstraction Layer</span>
            </span></div><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schema/index.html">Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indexing/index.html">Index Operations</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Search &amp; Filter Conditions</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../cookbooks/index.html">Cookbooks</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbooks/create-own-adapter.html">Create own Adapter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../research/index.html">Research</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="search-filter-conditions">
<h1>Search &amp; Filter Conditions<a class="headerlink" href="#search-filter-conditions" title="Permalink to this heading">#</a></h1>
<p>In the <a class="reference internal" href="../getting-started/index.html"><span class="doc">Getting Started</span></a> documentation we already saw how we can use the <code class="docutils literal notranslate"><span class="pre">SearchBuilder</span></code> to
search for different documents in our indexes.</p>
<p>Beside search functionality the abstraction provides also different kind of filter conditions to build
also complex overview pages for e-commerce or other kind of applications.</p>
<p>The following shows the basic usage as already shown in the “Getting Started” documentation. Under the
<code class="docutils literal notranslate"><span class="pre">$this-&gt;engine</span></code> variable we assume that you have already injected your created <code class="docutils literal notranslate"><span class="pre">Engine</span></code> instance.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$result</span> <span class="k">as</span> <span class="nv">$document</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the document</span>
<span class="p">}</span>

<span class="nv">$total</span> <span class="o">=</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">total</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is also possible to change the index after creating the searchbuilder via <code class="docutils literal notranslate"><span class="pre">$searchBuilder-&gt;index('other')</span></code>.</p>
</div>
<section id="conditions">
<h2>Conditions<a class="headerlink" href="#conditions" title="Permalink to this heading">#</a></h2>
<section id="searchcondition">
<h3>SearchCondition<a class="headerlink" href="#searchcondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">SearchCondition</span></code> is the most basic condition and can be used to search for a specific:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\SearchCondition</span><span class="p">(</span><span class="s1">&#39;Search Term&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The condition does only search on fields which are marked as <code class="docutils literal notranslate"><span class="pre">searchable</span></code> in the index configuration.</p>
</section>
<section id="equalcondition">
<h3>EqualCondition<a class="headerlink" href="#equalcondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">EqualCondition</span></code> is used to filter the result by a specific field value matching a given value.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\EqualCondition</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;UI&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration, it can be also
used on fields which are not marked as <code class="docutils literal notranslate"><span class="pre">multiple</span></code>.</p>
</section>
<section id="notequalcondition">
<h3>NotEqualCondition<a class="headerlink" href="#notequalcondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">NotEqualCondition</span></code> is used to filter the result by a specific field value not matching a given value.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\NotEqualCondition</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;UI&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration, it can be also
used on fields which are not marked as <code class="docutils literal notranslate"><span class="pre">multiple</span></code>.</p>
</section>
<section id="identifiercondition">
<h3>IdentifierCondition<a class="headerlink" href="#identifiercondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">IdentifierCondition</span></code> is a special kind of <code class="docutils literal notranslate"><span class="pre">EqualCondition</span></code> on the identifier field,
if you want to load a document by its identifier this condition is faster in most search engines
then using a <code class="docutils literal notranslate"><span class="pre">EqualCondition</span></code>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\IdentifierCondition</span><span class="p">(</span><span class="s1">&#39;23b30f01-d8fd-4dca-b36a-4710e360a965&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="greaterthancondition">
<h3>GreaterThanCondition<a class="headerlink" href="#greaterthancondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">GreaterThanCondition</span></code> is used to filter the result by a specific field value be greater than (<code class="docutils literal notranslate"><span class="pre">&gt;</span></code>)
the given value.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\GreaterThanCondition</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration.</p>
</section>
<section id="greaterthanequalcondition">
<h3>GreaterThanEqualCondition<a class="headerlink" href="#greaterthanequalcondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">GreaterThanEqualCondition</span></code> is used to filter the result by a specific field value be greater than equal (<code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>)
the given value.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\GreaterThanEqualCondition</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration.</p>
</section>
<section id="lessthancondition">
<h3>LessThanCondition<a class="headerlink" href="#lessthancondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">LessThanCondition</span></code> is used to filter the result by a specific field value be less than equal (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>)
the given value.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\LessThanCondition</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration.</p>
</section>
<section id="lessthanequalcondition">
<h3>LessThanEqualCondition<a class="headerlink" href="#lessthanequalcondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">LessThanEqualCondition</span></code> is used to filter the result by a specific field value be less than equal (<code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>)
the given value.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\LessThanEqualCondition</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration.</p>
</section>
<section id="geodistancecondition">
<h3>GeoDistanceCondition<a class="headerlink" href="#geodistancecondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">GeoDistanceCondition</span></code> is used to filter results within a radius by specifying a latitude, longitude and distance in meters.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;restaurants&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\GeoDistanceCondition</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="mf">45.472735</span><span class="p">,</span> <span class="mf">9.184019</span><span class="p">,</span> <span class="mi">2000</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration.</p>
</section>
<section id="geoboundingboxcondition">
<h3>GeoBoundingBoxCondition<a class="headerlink" href="#geoboundingboxcondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">GeoBoundingBoxCondition</span></code> is used to filter results within a bounding box by specifying a min latitude, min longitude, max latitude and max longitude.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;restaurants&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\GeoBoundingBoxCondition</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="mf">45.494181</span><span class="p">,</span> <span class="mf">9.214024</span><span class="p">,</span> <span class="mf">45.449484</span><span class="p">,</span> <span class="mf">9.179175</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">GeoBoundingBoxCondition</span></code> is currently not supported by <code class="docutils literal notranslate"><span class="pre">Redisearch</span></code> adapter.
See <a class="reference external" href="https://github.com/RediSearch/RediSearch/issues/680">this Github Issue</a> for more information.</p>
</div>
</section>
<section id="orcondition">
<h3>OrCondition<a class="headerlink" href="#orcondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">OrCondition</span></code> is used to filter by two or more conditions where at least one condition needs to match.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\OrCondition</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">Condition\GreaterThanCondition</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">Condition\EqualCondition</span><span class="p">(</span><span class="s1">&#39;isSpecial&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
    <span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The fields are required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration.</p>
</section>
<section id="andcondition">
<h3>AndCondition<a class="headerlink" href="#andcondition" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">AndCondition</span></code> is used to combine two or more conditions where all conditions need to match.
By default, all conditions are connected with <code class="docutils literal notranslate"><span class="pre">AND</span></code>, so it only makes sense to use an <code class="docutils literal notranslate"><span class="pre">AndCondition</span></code>
in combination with <code class="docutils literal notranslate"><span class="pre">OrCondition</span></code> filters.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\AndCondition</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">Condition\EqualCondition</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;Tech&#39;</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">Condition\OrCondition</span><span class="p">(</span>
            <span class="k">new</span> <span class="nx">Condition\EqualCondition</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;UX&#39;</span><span class="p">),</span>
            <span class="k">new</span> <span class="nx">Condition\EqualCondition</span><span class="p">(</span><span class="s1">&#39;isSpecial&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The fields are required to be marked as <code class="docutils literal notranslate"><span class="pre">filterable</span></code> in the index configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">Algolia</span></code> Adapter is used not all kind of combination with <code class="docutils literal notranslate"><span class="pre">OrCondition</span></code> are possible.
See <a class="reference external" href="https://github.com/algolia/algoliasearch-client-php/issues/385">this Github Issue</a> for more information.</p>
</div>
</section>
</section>
<section id="filter-on-objects-and-typed-fields">
<h2>Filter on Objects and Typed Fields<a class="headerlink" href="#filter-on-objects-and-typed-fields" title="Permalink to this heading">#</a></h2>
<p>To filter on <code class="docutils literal notranslate"><span class="pre">Objects</span></code> and <code class="docutils literal notranslate"><span class="pre">Typed</span></code> fields you need to use the <code class="docutils literal notranslate"><span class="pre">.</span></code> symbol
as a separator between the object and the field.</p>
<p>For example for a document like this where the rating value is filterable:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$document</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;rating&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1.5&#39;</span>
    <span class="p">],</span>
<span class="p">];</span>
</pre></div>
</div>
<p>Need to be queried this way <cite>&lt;object&gt;.&lt;field&gt;</cite>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\LessThanEqualCondition</span><span class="p">(</span><span class="s1">&#39;rating.value&#39;</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>To filter on <code class="docutils literal notranslate"><span class="pre">Typed</span></code> objects also the <cite>.</cite> symbol is used but the type name need to be included as well.</p>
<p>For example for a document like this where header media is filterable:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$document</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;header&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span>
        <span class="s1">&#39;media&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
    <span class="p">],</span>
<span class="p">];</span>
</pre></div>
</div>
<p>Need to be queried this way <cite>&lt;object&gt;.&lt;type&gt;.&lt;field&gt;</cite>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Condition\EqualCondition</span><span class="p">(</span><span class="s1">&#39;header.image.media&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>Also nested objects and types can be queried the same way.</p>
</section>
<hr class="docutils" />
<section id="pagination">
<h2>Pagination<a class="headerlink" href="#pagination" title="Permalink to this heading">#</a></h2>
<p>Beside the searches and filters you can also limit the result by a given <code class="docutils literal notranslate"><span class="pre">limit</span></code> and/or <code class="docutils literal notranslate"><span class="pre">offset</span></code>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">offset</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>With the <code class="docutils literal notranslate"><span class="pre">limit</span></code> and <code class="docutils literal notranslate"><span class="pre">offset</span></code> also a basic pagination can be created this way:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="nv">$page</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// get from query parameter</span>
<span class="nv">$pageSize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="cm">/* ... */</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">limit</span><span class="p">(</span><span class="nv">$pageSize</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">offset</span><span class="p">((</span><span class="nv">$page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nv">$pageSize</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>

<span class="nv">$total</span> <span class="o">=</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">total</span><span class="p">();</span>
<span class="nv">$maxPage</span> <span class="o">=</span> <span class="nb">ceil</span><span class="p">(</span><span class="nv">$total</span> <span class="o">/</span> <span class="nv">$pageSize</span><span class="p">)</span> <span class="o">?:</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$result</span> <span class="k">as</span> <span class="nv">$document</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the document</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="sorting">
<h2>Sorting<a class="headerlink" href="#sorting" title="Permalink to this heading">#</a></h2>
<p>The abstraction can also be used to create complex overview pages where you not only can search or filter
your results but also <code class="docutils literal notranslate"><span class="pre">sort</span></code> them by a given field.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addSortBy</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="s1">&#39;desc&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Schranz\Search\SEAL\Search\Condition</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span><span class="o">-&gt;</span><span class="na">createSearchBuilder</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addSortBy</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="s1">&#39;asc&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">getResult</span><span class="p">();</span>
</pre></div>
</div>
<p>The field is required to be marked as <code class="docutils literal notranslate"><span class="pre">sortable</span></code> in the index configuration.</p>
</section>
<hr class="docutils" />
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>After reading this documentation you should have a basic understanding how to use the abstraction
to manage Indexes, add and remove Documents and how to search and filter the results. You should
now be ready to start using the abstraction for your different kind of needs.</p>
<p>Missing something? Let us know by creating an issue
on our <a class="reference external" href="https://github.com/schranz-search/schranz-search">Github Repository</a>.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
    
        <div class="related-pages">
          <a class="next-page" href="../cookbooks/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Cookbooks</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../indexing/index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Index Operations</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Alexander Schranz
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        

    
        <div style="padding-bottom: 32px;">
            <div style="margin-left: auto; font-size: 12px;">
                Created with support in the austrian alps at <a href="https://github.com/sulu/sulu"><b>Sulu CMS</b></a>.
            </div>

            <br>

            <div>
                <a class="muted-link" target="_blank" href="https://github.com/schranz-search/schranz-search/edit/0.6/docs/search-and-filters/index.rst" style="font-size: 12px; display: inline-flex; gap: 8px; align-items: center;">
                    Edit on Github

                    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" style="width: 16px;">
                        <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                </a>
            </div>
        </div>
    

      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Search &amp; Filter Conditions</a><ul>
<li><a class="reference internal" href="#conditions">Conditions</a><ul>
<li><a class="reference internal" href="#searchcondition">SearchCondition</a></li>
<li><a class="reference internal" href="#equalcondition">EqualCondition</a></li>
<li><a class="reference internal" href="#notequalcondition">NotEqualCondition</a></li>
<li><a class="reference internal" href="#identifiercondition">IdentifierCondition</a></li>
<li><a class="reference internal" href="#greaterthancondition">GreaterThanCondition</a></li>
<li><a class="reference internal" href="#greaterthanequalcondition">GreaterThanEqualCondition</a></li>
<li><a class="reference internal" href="#lessthancondition">LessThanCondition</a></li>
<li><a class="reference internal" href="#lessthanequalcondition">LessThanEqualCondition</a></li>
<li><a class="reference internal" href="#geodistancecondition">GeoDistanceCondition</a></li>
<li><a class="reference internal" href="#geoboundingboxcondition">GeoBoundingBoxCondition</a></li>
<li><a class="reference internal" href="#orcondition">OrCondition</a></li>
<li><a class="reference internal" href="#andcondition">AndCondition</a></li>
</ul>
</li>
<li><a class="reference internal" href="#filter-on-objects-and-typed-fields">Filter on Objects and Typed Fields</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#sorting">Sorting</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>